{"ast":null,"code":"import _toConsumableArray from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{connect}from\"react-redux\";import{loadBooks}from\"../../actions/bookActions\";import{loadAuthors}from\"../../actions/authorActions\";import{Link}from\"react-router-dom\";import StarRatings from\"react-star-ratings\";var Home=/*#__PURE__*/function(_React$Component){_inherits(Home,_React$Component);function Home(){_classCallCheck(this,Home);return _possibleConstructorReturn(this,_getPrototypeOf(Home).apply(this,arguments));}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){if(!this.props.books||this.props.books.length===0){this.props.loadBooks();}if(!this.props.authors||this.props.authors.length===0){this.props.loadAuthors();}}},{key:\"render\",value:function render(){var topAuthors=_toConsumableArray(this.props.authors).sort(function(a,b){return b.rating-a.rating;}).slice(0,2);var topBooks=_toConsumableArray(this.props.books).sort(function(a,b){return b.rating-a.rating;}).slice(0,2);var books=topBooks.map(function(book){return React.createElement(\"div\",{key:book.id},React.createElement(\"span\",null,book.name),React.createElement(\"br\",null),React.createElement(StarRatings,{rating:book.rating,starRatedColor:\"blue\",numberOfStars:5,name:\"rating\"}),React.createElement(\"br\",null));});var authors=topAuthors.map(function(author){return React.createElement(\"div\",{key:author.id},React.createElement(\"span\",null,author.name),React.createElement(\"br\",null),React.createElement(StarRatings,{rating:author.rating,starRatedColor:\"blue\",numberOfStars:5,name:\"rating\"}),React.createElement(\"br\",null));});return React.createElement(React.Fragment,null,this.props.apiCallInProgress?React.createElement(\"div\",null,\"Loading\"):React.createElement(React.Fragment,null,React.createElement(\"div\",null,\"Top books\",books),React.createElement(\"div\",null,\"Top authors\",authors)));}}]);return Home;}(React.Component);function mapStateToProps(state){return{books:state.books,authors:state.authors,apiCallInProgress:state.apiCallInProgress};}export default connect(mapStateToProps,{loadBooks:loadBooks,loadAuthors:loadAuthors})(Home);","map":{"version":3,"sources":["/Users/rajatsharma/Documents/Practice/React/books_authors/src/components/Home/home.js"],"names":["React","connect","loadBooks","loadAuthors","Link","StarRatings","Home","props","books","length","authors","topAuthors","sort","a","b","rating","slice","topBooks","map","book","id","name","author","apiCallInProgress","Component","mapStateToProps","state"],"mappings":"81BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,SAAT,KAA0B,2BAA1B,CACA,OAASC,WAAT,KAA4B,6BAA5B,CAEA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,C,GAEMC,CAAAA,I,wRACgB,CAClB,GAAI,CAAC,KAAKC,KAAL,CAAWC,KAAZ,EAAqB,KAAKD,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,GAA4B,CAArD,CAAwD,CACtD,KAAKF,KAAL,CAAWL,SAAX,GACD,CACD,GAAI,CAAC,KAAKK,KAAL,CAAWG,OAAZ,EAAuB,KAAKH,KAAL,CAAWG,OAAX,CAAmBD,MAAnB,GAA8B,CAAzD,CAA4D,CAC1D,KAAKF,KAAL,CAAWJ,WAAX,GACD,CACF,C,uCAEQ,CACP,GAAIQ,CAAAA,UAAU,CAAG,mBAAI,KAAKJ,KAAL,CAAWG,OAAf,EACdE,IADc,CACT,SAACC,CAAD,CAAIC,CAAJ,QAAUA,CAAAA,CAAC,CAACC,MAAF,CAAWF,CAAC,CAACE,MAAvB,EADS,EAEdC,KAFc,CAER,CAFQ,CAEL,CAFK,CAAjB,CAGA,GAAIC,CAAAA,QAAQ,CAAG,mBAAI,KAAKV,KAAL,CAAWC,KAAf,EACZI,IADY,CACP,SAACC,CAAD,CAAIC,CAAJ,QAAUA,CAAAA,CAAC,CAACC,MAAF,CAAWF,CAAC,CAACE,MAAvB,EADO,EAEZC,KAFY,CAEN,CAFM,CAEH,CAFG,CAAf,CAIA,GAAIR,CAAAA,KAAK,CAAGS,QAAQ,CAACC,GAAT,CAAa,SAAAC,IAAI,QAC3B,4BAAK,GAAG,CAAEA,IAAI,CAACC,EAAf,EACE,gCAAOD,IAAI,CAACE,IAAZ,CADF,CAEE,8BAFF,CAGE,oBAAC,WAAD,EACE,MAAM,CAAEF,IAAI,CAACJ,MADf,CAEE,cAAc,CAAC,MAFjB,CAGE,aAAa,CAAE,CAHjB,CAIE,IAAI,CAAC,QAJP,EAHF,CASE,8BATF,CAD2B,EAAjB,CAAZ,CAaA,GAAIL,CAAAA,OAAO,CAAGC,UAAU,CAACO,GAAX,CAAe,SAAAI,MAAM,QACjC,4BAAK,GAAG,CAAEA,MAAM,CAACF,EAAjB,EACE,gCAAOE,MAAM,CAACD,IAAd,CADF,CAEE,8BAFF,CAGE,oBAAC,WAAD,EACE,MAAM,CAAEC,MAAM,CAACP,MADjB,CAEE,cAAc,CAAC,MAFjB,CAGE,aAAa,CAAE,CAHjB,CAIE,IAAI,CAAC,QAJP,EAHF,CASE,8BATF,CADiC,EAArB,CAAd,CAaA,MACE,yCACG,KAAKR,KAAL,CAAWgB,iBAAX,CACC,yCADD,CAGC,wCACE,2CAEGf,KAFH,CADF,CAKE,6CAEGE,OAFH,CALF,CAJJ,CADF,CAkBD,C,kBA9DgBV,KAAK,CAACwB,S,EAwEzB,QAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAC9B,MAAO,CACLlB,KAAK,CAAEkB,KAAK,CAAClB,KADR,CAELE,OAAO,CAAEgB,KAAK,CAAChB,OAFV,CAGLa,iBAAiB,CAAEG,KAAK,CAACH,iBAHpB,CAAP,CAKD,CAED,cAAetB,CAAAA,OAAO,CACpBwB,eADoB,CAEpB,CAAEvB,SAAS,CAATA,SAAF,CAAaC,WAAW,CAAXA,WAAb,CAFoB,CAAP,CAGbG,IAHa,CAAf","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { loadBooks } from \"../../actions/bookActions\";\nimport { loadAuthors } from \"../../actions/authorActions\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport StarRatings from \"react-star-ratings\";\n\nclass Home extends React.Component {\n  componentDidMount() {\n    if (!this.props.books || this.props.books.length === 0) {\n      this.props.loadBooks();\n    }\n    if (!this.props.authors || this.props.authors.length === 0) {\n      this.props.loadAuthors();\n    }\n  }\n\n  render() {\n    let topAuthors = [...this.props.authors]\n      .sort((a, b) => b.rating - a.rating)\n      .slice(0, 2);\n    let topBooks = [...this.props.books]\n      .sort((a, b) => b.rating - a.rating)\n      .slice(0, 2);\n\n    let books = topBooks.map(book => (\n      <div key={book.id}>\n        <span>{book.name}</span>\n        <br />\n        <StarRatings\n          rating={book.rating}\n          starRatedColor=\"blue\"\n          numberOfStars={5}\n          name=\"rating\"\n        />\n        <br />\n      </div>\n    ));\n    let authors = topAuthors.map(author => (\n      <div key={author.id}>\n        <span>{author.name}</span>\n        <br />\n        <StarRatings\n          rating={author.rating}\n          starRatedColor=\"blue\"\n          numberOfStars={5}\n          name=\"rating\"\n        />\n        <br />\n      </div>\n    ));\n    return (\n      <>\n        {this.props.apiCallInProgress ? (\n          <div>Loading</div>\n        ) : (\n          <>\n            <div>\n              Top books\n              {books}\n            </div>\n            <div>\n              Top authors\n              {authors}\n            </div>\n          </>\n        )}\n      </>\n    );\n  }\n}\n\nHome.propTypes = {\n  books: PropTypes.array.isRequired,\n  authors: PropTypes.array.isRequired,\n  apiCallInProgress: PropTypes.bool.isRequired,\n  loadBooks: PropTypes.func.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    books: state.books,\n    authors: state.authors,\n    apiCallInProgress: state.apiCallInProgress\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  { loadBooks, loadAuthors }\n)(Home);\n"]},"metadata":{},"sourceType":"module"}