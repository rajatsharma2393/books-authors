{"ast":null,"code":"import _defineProperty from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{updateAuthor,addAuthor}from\"../../actions/authorActions\";import{connect}from\"react-redux\";import{Link,Redirect}from\"react-router-dom\";var ManageAuthor=/*#__PURE__*/function(_Component){_inherits(ManageAuthor,_Component);function ManageAuthor(){var _getPrototypeOf2;var _this;_classCallCheck(this,ManageAuthor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ManageAuthor)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={author:_objectSpread({},_this.props.currentAuthor)};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState({author:_objectSpread({},_this.state.author,_defineProperty({},name,value))});};_this.handleSubmit=function(event){event.preventDefault();if(_this.state.author.id){_this.props.updateAuthor(_this.state.author);}else{_this.props.addAuthor(_this.state.author);}_this.props.history.push(\"/authors\");};_this.handleAddAnotherBook=function(){_this.props.history.push(\"/book/0\",{authorId:_this.state.author.id});};return _this;}_createClass(ManageAuthor,[{key:\"render\",value:function render(){var author=this.state.author;var currentAuthorBooks=this.props.books.filter(function(book){return book.authorId===author.id;});var books=currentAuthorBooks.map(function(book){return React.createElement(\"li\",{key:book.id},book.name);});return React.createElement(React.Fragment,null,this.props.books.length===0&&React.createElement(Redirect,{to:\"/\"}),React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"label\",{htmlFor:\"id\"},\"Author Id:\"),React.createElement(\"input\",{type:\"text\",value:author.id,onChange:this.handleChange,name:\"id\"}),React.createElement(\"br\",null),React.createElement(\"label\",{htmlFor:\"name\"},\"Author Name:\"),React.createElement(\"input\",{type:\"text\",value:author.name,onChange:this.handleChange,name:\"name\"}),React.createElement(\"br\",null),React.createElement(\"ul\",null,books),React.createElement(\"br\",null),React.createElement(\"button\",{onClick:this.handleAddAnotherBook},\"Add another Book\"),React.createElement(\"br\",null),React.createElement(\"button\",{type:\"submit\"},author.id===0?\"Add\":\"Update\")));}}]);return ManageAuthor;}(Component);function mapStateToProps(state,ownProps){var authorId=parseInt(ownProps.match.params.id);var currentAuthor={id:0,name:\"\",bookIds:[]};if(authorId!==0&&state.authors.length>0){currentAuthor=state.authors.find(function(author){return author.id===authorId;})||currentAuthor;}return{currentAuthor:currentAuthor,books:state.books,authors:state.authors};}var mapDispatchToProps={updateAuthor:updateAuthor,addAuthor:addAuthor};export default connect(mapStateToProps,mapDispatchToProps)(ManageAuthor);","map":{"version":3,"sources":["/Users/rajatsharma/Documents/Practice/React/books_authors/src/components/Author/manageAuthor.js"],"names":["React","Component","updateAuthor","addAuthor","connect","Link","Redirect","ManageAuthor","state","author","props","currentAuthor","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","id","history","push","handleAddAnotherBook","authorId","currentAuthorBooks","books","filter","book","map","length","mapStateToProps","ownProps","parseInt","match","params","bookIds","authors","find","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { updateAuthor, addAuthor } from \"../../actions/authorActions\";\nimport { connect } from \"react-redux\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nclass ManageAuthor extends Component {\n  state = { author: { ...this.props.currentAuthor } };\n\n  handleChange = event => {\n    let { name, value } = event.target;\n    this.setState({\n      author: {\n        ...this.state.author,\n        [name]: value\n      }\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    if (this.state.author.id) {\n      this.props.updateAuthor(this.state.author);\n    } else {\n      this.props.addAuthor(this.state.author);\n    }\n    this.props.history.push(\"/authors\");\n  };\n\n  handleAddAnotherBook = () => {\n    this.props.history.push(\"/book/0\", {\n      authorId: this.state.author.id\n    });\n  };\n\n  render() {\n    let author = this.state.author;\n    let currentAuthorBooks = this.props.books.filter(\n      book => book.authorId === author.id\n    );\n    let books = currentAuthorBooks.map(book => (\n      <li key={book.id}>{book.name}</li>\n    ));\n    return (\n      <>\n        {this.props.books.length === 0 && <Redirect to=\"/\" />}\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor=\"id\">Author Id:</label>\n          <input\n            type=\"text\"\n            value={author.id}\n            onChange={this.handleChange}\n            name=\"id\"\n          />\n          <br />\n          <label htmlFor=\"name\">Author Name:</label>\n          <input\n            type=\"text\"\n            value={author.name}\n            onChange={this.handleChange}\n            name=\"name\"\n          />\n          <br />\n          <ul>{books}</ul>\n          <br />\n          <button onClick={this.handleAddAnotherBook}>Add another Book</button>\n          <br />\n          <button type=\"submit\">{author.id === 0 ? \"Add\" : \"Update\"}</button>\n        </form>\n      </>\n    );\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const authorId = parseInt(ownProps.match.params.id);\n\n  let currentAuthor = {\n    id: 0,\n    name: \"\",\n    bookIds: []\n  };\n\n  if (authorId !== 0 && state.authors.length > 0) {\n    currentAuthor =\n      state.authors.find(author => author.id === authorId) || currentAuthor;\n  }\n\n  return {\n    currentAuthor: currentAuthor,\n    books: state.books,\n    authors: state.authors\n  };\n}\n\nconst mapDispatchToProps = {\n  updateAuthor,\n  addAuthor\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ManageAuthor);\n"]},"metadata":{},"sourceType":"module"}