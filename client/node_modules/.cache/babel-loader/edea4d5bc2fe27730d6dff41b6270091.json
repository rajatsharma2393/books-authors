{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = trackForMutations;\n\nfunction trackForMutations(isImmutable, ignore, obj) {\n  var trackedProperties = trackProperties(isImmutable, ignore, obj);\n  return {\n    detectMutations: function detectMutations() {\n      return _detectMutations(isImmutable, ignore, trackedProperties, obj);\n    }\n  };\n}\n\nfunction trackProperties(isImmutable) {\n  var ignore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var obj = arguments[2];\n  var path = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  var tracked = {\n    value: obj\n  };\n\n  if (!isImmutable(obj)) {\n    tracked.children = {};\n\n    for (var key in obj) {\n      var childPath = path.concat(key);\n\n      if (ignore.length && ignore.indexOf(childPath.join('.')) !== -1) {\n        continue;\n      }\n\n      tracked.children[key] = trackProperties(isImmutable, ignore, obj[key], childPath);\n    }\n  }\n\n  return tracked;\n}\n\nfunction _detectMutations(isImmutable) {\n  var ignore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var trackedProperty = arguments[2];\n  var obj = arguments[3];\n  var sameParentRef = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var path = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];\n  var prevObj = trackedProperty ? trackedProperty.value : undefined;\n  var sameRef = prevObj === obj;\n\n  if (sameParentRef && !sameRef && !Number.isNaN(obj)) {\n    return {\n      wasMutated: true,\n      path: path\n    };\n  }\n\n  if (isImmutable(prevObj) || isImmutable(obj)) {\n    return {\n      wasMutated: false\n    };\n  } // Gather all keys from prev (tracked) and after objs\n\n\n  var keysToDetect = {};\n  Object.keys(trackedProperty.children).forEach(function (key) {\n    keysToDetect[key] = true;\n  });\n  Object.keys(obj).forEach(function (key) {\n    keysToDetect[key] = true;\n  });\n  var keys = Object.keys(keysToDetect);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var childPath = path.concat(key);\n\n    if (ignore.length && ignore.indexOf(childPath.join('.')) !== -1) {\n      continue;\n    }\n\n    var result = _detectMutations(isImmutable, ignore, trackedProperty.children[key], obj[key], sameRef, childPath);\n\n    if (result.wasMutated) {\n      return result;\n    }\n  }\n\n  return {\n    wasMutated: false\n  };\n}","map":{"version":3,"sources":["/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/redux-immutable-state-invariant/dist/trackForMutations.js"],"names":["Object","defineProperty","exports","value","default","trackForMutations","isImmutable","ignore","obj","trackedProperties","trackProperties","detectMutations","_detectMutations","arguments","length","undefined","path","tracked","children","key","childPath","concat","indexOf","join","trackedProperty","sameParentRef","prevObj","sameRef","Number","isNaN","wasMutated","keysToDetect","keys","forEach","i","result"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = trackForMutations;\nfunction trackForMutations(isImmutable, ignore, obj) {\n  var trackedProperties = trackProperties(isImmutable, ignore, obj);\n  return {\n    detectMutations: function detectMutations() {\n      return _detectMutations(isImmutable, ignore, trackedProperties, obj);\n    }\n  };\n}\n\nfunction trackProperties(isImmutable) {\n  var ignore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var obj = arguments[2];\n  var path = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n  var tracked = { value: obj };\n\n  if (!isImmutable(obj)) {\n    tracked.children = {};\n\n    for (var key in obj) {\n      var childPath = path.concat(key);\n      if (ignore.length && ignore.indexOf(childPath.join('.')) !== -1) {\n        continue;\n      }\n\n      tracked.children[key] = trackProperties(isImmutable, ignore, obj[key], childPath);\n    }\n  }\n  return tracked;\n}\n\nfunction _detectMutations(isImmutable) {\n  var ignore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var trackedProperty = arguments[2];\n  var obj = arguments[3];\n  var sameParentRef = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var path = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];\n\n  var prevObj = trackedProperty ? trackedProperty.value : undefined;\n\n  var sameRef = prevObj === obj;\n\n  if (sameParentRef && !sameRef && !Number.isNaN(obj)) {\n    return { wasMutated: true, path: path };\n  }\n\n  if (isImmutable(prevObj) || isImmutable(obj)) {\n    return { wasMutated: false };\n  }\n\n  // Gather all keys from prev (tracked) and after objs\n  var keysToDetect = {};\n  Object.keys(trackedProperty.children).forEach(function (key) {\n    keysToDetect[key] = true;\n  });\n  Object.keys(obj).forEach(function (key) {\n    keysToDetect[key] = true;\n  });\n\n  var keys = Object.keys(keysToDetect);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var childPath = path.concat(key);\n    if (ignore.length && ignore.indexOf(childPath.join('.')) !== -1) {\n      continue;\n    }\n\n    var result = _detectMutations(isImmutable, ignore, trackedProperty.children[key], obj[key], sameRef, childPath);\n\n    if (result.wasMutated) {\n      return result;\n    }\n  }\n  return { wasMutated: false };\n}"]},"metadata":{},"sourceType":"script"}