{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = immutableStateInvariantMiddleware;\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _jsonStringifySafe = require('json-stringify-safe');\n\nvar _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);\n\nvar _isImmutable = require('./isImmutable');\n\nvar _isImmutable2 = _interopRequireDefault(_isImmutable);\n\nvar _trackForMutations = require('./trackForMutations');\n\nvar _trackForMutations2 = _interopRequireDefault(_trackForMutations);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar BETWEEN_DISPATCHES_MESSAGE = ['A state mutation was detected between dispatches, in the path `%s`.', 'This may cause incorrect behavior.', '(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)'].join(' ');\nvar INSIDE_DISPATCH_MESSAGE = ['A state mutation was detected inside a dispatch, in the path: `%s`.', 'Take a look at the reducer(s) handling the action %s.', '(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)'].join(' ');\n\nfunction immutableStateInvariantMiddleware() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$isImmutable = options.isImmutable,\n      isImmutable = _options$isImmutable === undefined ? _isImmutable2.default : _options$isImmutable,\n      ignore = options.ignore;\n\n  var track = _trackForMutations2.default.bind(null, isImmutable, ignore);\n\n  return function (_ref) {\n    var getState = _ref.getState;\n    var state = getState();\n    var tracker = track(state);\n    var result = void 0;\n    return function (next) {\n      return function (action) {\n        state = getState();\n        result = tracker.detectMutations(); // Track before potentially not meeting the invariant\n\n        tracker = track(state);\n        (0, _invariant2.default)(!result.wasMutated, BETWEEN_DISPATCHES_MESSAGE, (result.path || []).join('.'));\n        var dispatchedAction = next(action);\n        state = getState();\n        result = tracker.detectMutations(); // Track before potentially not meeting the invariant\n\n        tracker = track(state);\n        result.wasMutated && (0, _invariant2.default)(!result.wasMutated, INSIDE_DISPATCH_MESSAGE, (result.path || []).join('.'), (0, _jsonStringifySafe2.default)(action));\n        return dispatchedAction;\n      };\n    };\n  };\n}","map":{"version":3,"sources":["/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/redux-immutable-state-invariant/dist/index.js"],"names":["Object","defineProperty","exports","value","default","immutableStateInvariantMiddleware","_invariant","require","_invariant2","_interopRequireDefault","_jsonStringifySafe","_jsonStringifySafe2","_isImmutable","_isImmutable2","_trackForMutations","_trackForMutations2","obj","__esModule","BETWEEN_DISPATCHES_MESSAGE","join","INSIDE_DISPATCH_MESSAGE","options","arguments","length","undefined","_options$isImmutable","isImmutable","ignore","track","bind","_ref","getState","state","tracker","result","next","action","detectMutations","wasMutated","path","dispatchedAction"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = immutableStateInvariantMiddleware;\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _jsonStringifySafe = require('json-stringify-safe');\n\nvar _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);\n\nvar _isImmutable = require('./isImmutable');\n\nvar _isImmutable2 = _interopRequireDefault(_isImmutable);\n\nvar _trackForMutations = require('./trackForMutations');\n\nvar _trackForMutations2 = _interopRequireDefault(_trackForMutations);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BETWEEN_DISPATCHES_MESSAGE = ['A state mutation was detected between dispatches, in the path `%s`.', 'This may cause incorrect behavior.', '(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)'].join(' ');\n\nvar INSIDE_DISPATCH_MESSAGE = ['A state mutation was detected inside a dispatch, in the path: `%s`.', 'Take a look at the reducer(s) handling the action %s.', '(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)'].join(' ');\n\nfunction immutableStateInvariantMiddleware() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$isImmutable = options.isImmutable,\n      isImmutable = _options$isImmutable === undefined ? _isImmutable2.default : _options$isImmutable,\n      ignore = options.ignore;\n\n  var track = _trackForMutations2.default.bind(null, isImmutable, ignore);\n\n  return function (_ref) {\n    var getState = _ref.getState;\n\n    var state = getState();\n    var tracker = track(state);\n\n    var result = void 0;\n    return function (next) {\n      return function (action) {\n        state = getState();\n\n        result = tracker.detectMutations();\n        // Track before potentially not meeting the invariant\n        tracker = track(state);\n\n        (0, _invariant2.default)(!result.wasMutated, BETWEEN_DISPATCHES_MESSAGE, (result.path || []).join('.'));\n\n        var dispatchedAction = next(action);\n        state = getState();\n\n        result = tracker.detectMutations();\n        // Track before potentially not meeting the invariant\n        tracker = track(state);\n\n        result.wasMutated && (0, _invariant2.default)(!result.wasMutated, INSIDE_DISPATCH_MESSAGE, (result.path || []).join('.'), (0, _jsonStringifySafe2.default)(action));\n\n        return dispatchedAction;\n      };\n    };\n  };\n}"]},"metadata":{},"sourceType":"script"}