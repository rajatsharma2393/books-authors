{"ast":null,"code":"import _objectSpread from \"/Users/rajatsharma/Documents/Practice/React/books_authors/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/rajatsharma/Documents/Practice/React/books_authors/src/components/Author/manageAuthor.js\";\nimport React, { Component } from \"react\";\nimport { updateAuthor, addAuthor } from \"../../actions/authorActions\";\nimport { connect } from \"react-redux\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nclass ManageAuthor extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      author: _objectSpread({}, this.props.currentAuthor)\n    };\n\n    this.handleChange = event => {\n      let _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      this.setState({\n        author: _objectSpread({}, this.state.author, {\n          [name]: value\n        })\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n\n      if (this.state.author.id) {\n        this.props.updateAuthor(this.state.author);\n      } else {\n        this.props.addAuthor(this.state.author);\n      }\n\n      this.props.history.push(\"/authors\");\n    };\n  }\n\n  componentDidMount() {\n    if (!this.props.books || this.props.books.length === 0) {\n      this.props.loadBooks();\n    }\n\n    if (!this.props.authors || this.props.authors.length === 0) {\n      this.props.loadAuthors();\n    }\n  }\n\n  render() {\n    let author = this.state.author;\n    let currentAuthorBooks = this.props.books.filter(book => book.authorId === author.id);\n    let books = currentAuthorBooks.map(book => React.createElement(\"li\", {\n      key: book.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, book.name));\n    return React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"id\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"Author Id:\"), React.createElement(\"input\", {\n      type: \"text\",\n      value: author.id,\n      onChange: this.handleChange,\n      name: \"id\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"Author Name:\"), React.createElement(\"input\", {\n      type: \"text\",\n      value: author.name,\n      onChange: this.handleChange,\n      name: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, books), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/book/0\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Add another Book\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, author.id === 0 ? \"Add\" : \"Update\"));\n  }\n\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const authorId = parseInt(ownProps.match.params.id);\n  let currentAuthor = {\n    id: 0,\n    name: \"\",\n    bookIds: []\n  };\n\n  if (authorId !== 0 && state.authors.length > 0) {\n    currentAuthor = state.authors.find(author => author.id === authorId) || currentAuthor;\n  }\n\n  return {\n    currentAuthor: currentAuthor,\n    books: state.books,\n    authors: state.authors\n  };\n}\n\nconst mapDispatchToProps = {\n  updateAuthor,\n  addAuthor\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageAuthor);","map":{"version":3,"sources":["/Users/rajatsharma/Documents/Practice/React/books_authors/src/components/Author/manageAuthor.js"],"names":["React","Component","updateAuthor","addAuthor","connect","Link","Redirect","ManageAuthor","state","author","props","currentAuthor","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","id","history","push","componentDidMount","books","length","loadBooks","authors","loadAuthors","render","currentAuthorBooks","filter","book","authorId","map","mapStateToProps","ownProps","parseInt","match","params","bookIds","find","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { updateAuthor, addAuthor } from \"../../actions/authorActions\";\nimport { connect } from \"react-redux\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nclass ManageAuthor extends Component {\n  state = { author: { ...this.props.currentAuthor } };\n\n  componentDidMount() {\n    if (!this.props.books || this.props.books.length === 0) {\n      this.props.loadBooks();\n    }\n    if (!this.props.authors || this.props.authors.length === 0) {\n      this.props.loadAuthors();\n    }\n  }\n\n  handleChange = event => {\n    let { name, value } = event.target;\n    this.setState({\n      author: {\n        ...this.state.author,\n        [name]: value\n      }\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    if (this.state.author.id) {\n      this.props.updateAuthor(this.state.author);\n    } else {\n      this.props.addAuthor(this.state.author);\n    }\n    this.props.history.push(\"/authors\");\n  };\n\n  render() {\n    let author = this.state.author;\n    let currentAuthorBooks = this.props.books.filter(\n      book => book.authorId === author.id\n    );\n    let books = currentAuthorBooks.map(book => (\n      <li key={book.id}>{book.name}</li>\n    ));\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label htmlFor=\"id\">Author Id:</label>\n        <input\n          type=\"text\"\n          value={author.id}\n          onChange={this.handleChange}\n          name=\"id\"\n        />\n        <br />\n        <label htmlFor=\"name\">Author Name:</label>\n        <input\n          type=\"text\"\n          value={author.name}\n          onChange={this.handleChange}\n          name=\"name\"\n        />\n        <br />\n        <ul>{books}</ul>\n        <br />\n        <Link to=\"/book/0\" className=\"btn btn-primary\">\n          Add another Book\n        </Link>\n        <br />\n        <button type=\"submit\">{author.id === 0 ? \"Add\" : \"Update\"}</button>\n      </form>\n    );\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const authorId = parseInt(ownProps.match.params.id);\n\n  let currentAuthor = {\n    id: 0,\n    name: \"\",\n    bookIds: []\n  };\n\n  if (authorId !== 0 && state.authors.length > 0) {\n    currentAuthor =\n      state.authors.find(author => author.id === authorId) || currentAuthor;\n  }\n\n  return {\n    currentAuthor: currentAuthor,\n    books: state.books,\n    authors: state.authors\n  };\n}\n\nconst mapDispatchToProps = {\n  updateAuthor,\n  addAuthor\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ManageAuthor);\n"]},"metadata":{},"sourceType":"module"}